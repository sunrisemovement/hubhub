%h1.title Manage Leaders

%p
  In this section, you can manage information for everyone who has filled out the
  %a{href: "#{ENV['LEADER_FORM']}", target: '_blank'} hub leader form
  for #{@hub['Name']}.

%p
  %a.button.is-warning{href: ENV['LEADER_FORM'], target: '_blank'} Add New Leader

%h2.subtitle Active Leaders (#{@hub.active_leaders.count})

%table.table.is-bordered.is-striped.is-fullwidth.is-responsive
  %thead
    %tr
      %th First Name
      %th Last Name
      %th Email
      %th Phone
      %th Roles
      %th Actions
  %tbody
    - @hub.active_leaders.each do |lead|
      %tr
        %td= lead['First Name']
        %td= lead['Last Name']
        %td= lead['Email']
        %td= lead['Phone']
        %td
          - if lead.roles.any?
            %small= lead.roles.join(", ")
          - else
            &nbsp;
        %td.has-text-centered
          %a.button.is-small.is-warning{href: "/leaders/#{lead.id}"} Edit

          %form.button-only{action: "/leaders/#{lead.id}/deactivate", method: 'POST', onsubmit: "return confirm('Are you sure?');"}
            %input.button.is-small.is-danger{type: 'submit', value: 'Set Inactive'}

%h2.subtitle Inactive Leaders (#{@hub.inactive_leaders.count})

%details
  %summary Click to expand

  %p
    This section contains our records of leaders marked inactive (as well as outdated versions of active leaders from before we started supporting leader editing ðŸ˜…). From here, you can re-activate leaders if they've stepped back into leadership roles, or you can permanently delete their data from our system.

  %table.table.is-bordered.is-striped.is-fullwidth.is-responsive
    %thead
      %tr
        %th First Name
        %th Last Name
        %th Email
        %th Previous Roles
        %th Actions
    %tbody
      - @hub.inactive_leaders.each do |lead|
        %tr
          %td= lead['First Name']
          %td= lead['Last Name']
          %td= lead['Email']
          %td
            - if lead.roles.any?
              %small= lead.roles.join(", ")
            - else
              &nbsp;
          %td.has-text-centered
            %form.button-only{action: "/leaders/#{lead.id}/reactivate", method: 'POST', onsubmit: "return confirm('Are you sure you want to mark #{lead.name} as active again?');"}
              %input.button.is-small.is-warning{type: 'submit', value: 'Set Active'}

            %form.button-only{action: "/leaders/#{lead.id}/delete", method: 'POST', onsubmit: "return confirm('Are you sure you want to delete #{lead.name} from our system?');"}
              %input.button.is-small.is-danger{type: 'submit', value: 'Delete'}
