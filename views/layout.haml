!!!5
%html
  %head
    %title Sunrise Hubhub
    %meta{charset: 'utf-8'}
    %meta{name: "viewport", content: "width=device-width, initial-scale=1"}
    %link{rel: 'stylesheet', type: 'text/css', href: '/sunrisebulma.css'}
    :css
      @media screen and (max-width: 600px) {
        .is-responsive td, .is-responsive th {
          display: flex;
          border-style: dotted;
        }
        .is-responsive td:first-child {
          border-top: 1px solid #ccc;
        }
        .is-responsive td:last-child {
          border-bottom: 1px solid #ccc;
        }
      }

      .hub-brand {
        text-transform: uppercase;
        font-weight: bold;
      }

  %body
    %nav.navbar.is-dark
      .navbar-brand
        %a.navbar-item{href: '/'}
          - if session[:hub_id]
            %span.hub-brand #{@hub['Name']}
          %img{src: '/s/map_icon.jpg'}

        :erb
          <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbar-menu">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>

      .navbar-menu#navbar-menu
        .navbar-start
          - if session[:hub_id]
            %a.navbar-item{href: '/soth', class: ('is-active' if request.path_info.start_with?('/soth'))}
              State of the Hub
            %a.navbar-item{href: '/map', class: ('is-active' if request.path_info == '/map')}
              View Map
            %a.navbar-item{href: '/map/edit', class: ('is-active' if request.path_info == '/map/edit')}
              Edit Map
            %a.navbar-item{href: '/leaders', class: ('is-active' if request.path_info.start_with?('/leaders'))}
              Manage Leaders
        - if session[:hub_id]
          .navbar-end
            .navbar-item
              %a.button.is-light{href: '/logout'} Log Out
    %main
      %section.section
        .container
          .content
            = yield

:javascript
  document.addEventListener('DOMContentLoaded', () => {
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
    if ($navbarBurgers.length > 0) {
      $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {
          const target = el.dataset.target;
          const $target = document.getElementById(target);
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
        });
      });
    }
  });
